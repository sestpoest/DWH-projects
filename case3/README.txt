Разрабатываем прототип хранилища данных. 

Технический стек: SQL/ PostgreSQL / Python/Airflow.

1)      Источник данных – генератор синтетических данных.

2)      Всё решение выполняется в рамках одной базы данных.

Перечень схем – слоёв:

a.       Схема «oltp_src_system» - в ней укладываются таблицы, функции, триггеры системы генерации синтетических данных:

b.       Схема «oltp_cdc_src_system» - лог изменений CDC –  строится на триггерах таблицы источника «src_system»;

c.       Схема «dwh_stage» - первый слой прототипа хранилища данных. Получает данные из источника схемы «oltp_cdc_src_system».;

d.       Схема «dwh_ods» - детальный слой, где мы храним все версии всех строк таблиц, история хранится непрерывно;

e.       Схема «report» - слой для материализации отчета (витрины данных) для последующего использования.

3)      В каждый слой прототипа должны входить следующие таблицы и функции:

a.       Схема «oltp_src_system» - таблицы данных, функции для заполнения, триггер ;

b.       Схема «oltp_cdc_src_system» - таблицы – лог CDC изменений источника данных;

c.       Схема «dwh_stage» - таблицы и функции для заполнения данных этого слоя;

d.       Схема «dwh_ods» - таблицы и функции для заполнения этого слоя, тут же будут храниться аналитический справочник;

e.       Схема «report» - функции для расчетов таблиц для отчетов.

4)      В слое схема «dwh_ods» предусмотреть создание аналитического справочника календарь;

5)      В слое «report» необходимо будет подготовить представление:

a.       по которому можно получить крайнее актуальное состояние данных в системе источнике;

b.       Несколько витрин данных по Вашим бизнес метрикам, одна – две витрины должны быть сделаны использованием календаря, подготовленного в схеме dwh_ods;

6)      Запуск логики упаковать в DAG Python; Вся логика должна быть на стороне PostgreSQL. Airflow нужен только для запуска всех функций в нужном порядке.

Требования к ответу
По всем созданным объектам в базе данных, предоставить:

Описание и назначение полей;
Описание алгоритмов захвата и формирования данных;
Нарисовать схему решения в любом виде (структура прототипа, datalinage);
Маппинги S2T;
Для витринного слоя написать задание на формирование каждого отчета, описание итоговых таблиц и алгоритмов формирования;
Описать шаги повторения, которые нужно произвести при добавлении дополнительных таблиц – источников в слое oltp_src_system – указать какие таблицы нужно указать с какими техническими полями на каких шагах;
Подготовить тест-кейсы для прототипа, запустить их, описать.